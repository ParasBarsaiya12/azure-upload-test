<!DOCTYPE html>
<html>
<head>
  <meta charset="utf-8"/>
  <title>Upload to Blob Storage</title>
</head>
<body>
  <h3>Upload File to Azure Blob</h3>
  <input type="file" id="fileInput"/>
  <button onclick="uploadFile()">Upload</button>
  <p id="status"></p>

  <script>
    async function uploadFile() {
      const fileInput = document.getElementById("fileInput");
      const status = document.getElementById("status");
      if (!fileInput.files.length) {
        status.innerText = "Please select a file.";
        return;
      }

      const file = fileInput.files[0];

      // Your container SAS URL
      const sasUrl = "https://stgacctflowaidev.blob.core.windows.net/file-upload?<YOUR_SAS_TOKEN>";
      const blobUrl = `${sasUrl}&comp=block&blockid=${btoa(file.name)}`;

      try {
        const uploadUrl = sasUrl.split("?")[0] + "/" + encodeURIComponent(file.name) + "?" + sasUrl.split("?")[1];

        const response = await fetch(uploadUrl, {
          method: "PUT",
          headers: { "x-ms-blob-type": "BlockBlob" },
          body: file
        });

        if (response.ok) {
          status.innerText = `✅ Uploaded successfully: ${file.name}`;
        } else {
          const text = await response.text();
          status.innerText = `❌ Upload failed: ${response.status} ${text}`;
        }
      } catch (err) {
        status.innerText = "❌ Error: " + err.message;
      }
    }
  </script>
</body>
</html>

