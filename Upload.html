<!DOCTYPE html>
<html>
<head>
  <meta charset="utf-8"/>
  <title>Upload to Blob</title>
</head>
<body>
  <h3>Upload File to Azure Blob</h3>
  <input type="file" id="fileInput"/>
  <button onclick="uploadFile()">Upload</button>
  <p id="status"></p>

  <script>
    async function uploadFile() {
      const fileInput = document.getElementById("fileInput");
      const status = document.getElementById("status");

      if (!fileInput.files.length) {
        status.innerText = "Please select a file.";
        return;
      }

      const file = fileInput.files[0];

      // ⚠️ Replace with your container SAS URL
      const sasUrl = "https://stgacctflowaidev.blob.core.windows.net/file-upload?sp=r&st=2025-09-03T09:51:23Z&se=2025-10-11T18:06:23Z&spr=https&sv=2024-11-04&sr=c&sig=b3kj2DocPrx0uR9J7MCPaMsGO1ToKWlF76w7o3l8uKE%3D";

      // Build full blob upload URL (container base + filename + SAS query)
      const baseUrl = sasUrl.split("?")[0];
      const sasToken = sasUrl.split("?")[1];
      const blobUrl = `${baseUrl}/${encodeURIComponent(file.name)}?${sasToken}`;

      try {
        const response = await fetch(blobUrl, {
          method: "PUT",
          headers: {
            "x-ms-blob-type": "BlockBlob"
          },
          body: file
        });

        if (response.ok) {
          status.innerText = `✅ Uploaded successfully: ${file.name}`;
        } else {
          const text = await response.text();
          status.innerText = `❌ Upload failed: ${response.status} - ${text}`;
        }
      } catch (err) {
        status.innerText = "❌ Error: " + err.message;
      }
    }
  </script>
</body>
</html>

